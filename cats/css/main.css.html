<html>
    <body></body>
    <script src="../scripts/get.addon"></script>
    <script>
        var heightCSS =  {
            ".browserIcon": {
                "width": 12,
                "height": 12,
                "margin-top": 9
            },
            "#header": {
                "height": 30,
                "font-size": 16
            },
            "#pageName": {
                "line-height": 30
            }
        };

        var widthCSS =  {
            "#mainBlock": {
                "width": 720
            }
        };

        var params = [
            GET('orientation'),
            GET('width'),
            GET('height'),
            GET('scaleX'),
            GET('scaleY'),
            GET('content')
        ]

        var error = {
            "errorCode": "135",
            "orientation": params[0],
            "width": params[1],
            "height": params[2],
            "scaleX": params[3],
            "scaleY": params[4],
            "content": params[5]
        }

        heightCSS["#content"] = new Object;
        widthCSS["#content"] = new Object;
        heightCSS["#browserPanel"] = new Object;
        widthCSS["#browserPanel"] = new Object;

        if (params[0] == 'height') {
            heightCSS["#browserPanel"]["left"] = 6;
            heightCSS["#content"]["border-radius"] = 5;
        } else {
            widthCSS["#browserPanel"]["left"] = 6;
            widthCSS["#content"]["border-radius"] = 5;
            
        }

        if (params[5] == 'height') {
            widthCSS["#content"]["width"] = 612;
            widthCSS["#content"]["height"] = widthCSS["#content"]["width"] / parseFloat(params[1]) * parseFloat(params[2]) - 1;
            widthCSS["#content"]["margin-top"] = (heightCSS["#header"]["height"] * parseFloat(params[4]) / 2  - widthCSS["#content"]["height"]) / 2;
            widthCSS["#content"]["margin-left"] = 0 - widthCSS["#content"]["width"] / 2;
        } else {
            heightCSS["#content"]["height"] = 350;
            heightCSS["#content"]["width"] = heightCSS["#content"]["height"] / parseFloat(params[2]) * parseFloat(params[1]) - 1;
            heightCSS["#content"]["margin-top"] = (heightCSS["#header"]["height"] - heightCSS["#content"]["height"]) / 2;
            heightCSS["#content"]["margin-left"] = 0 - heightCSS["#content"]["width"] / 2;
        }

        if (params[0] != 'Invalid Key' && params[1] != 'Invalid Key' && params[2] != 'Invalid Key' && params[3] != 'Invalid Key' && params[4] != 'Invalid Key' && params[5] != 'Invalid Key') {
            document.body.innerText = JSON.stringify(eval(GET('file')), null, 4);
        } else {
            document.body.innerText = JSON.stringify(error, null, 4);
        }
    </script>
</html>